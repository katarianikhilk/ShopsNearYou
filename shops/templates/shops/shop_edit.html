{% extends 'shops/base.html' %}

{% load crispy_forms_tags %}

{% block content %}

<div class="col-10 col-md-5 m-auto">
  <h2 class="form_heading">New Shop</h2>
  <form method="POST" class="post-form" enctype="multipart/form-data">
      {% csrf_token %}
      {{ form|crispy }}

      <div class="row ">
        <div class="col-5 col-md-6">
          <button class="btn fetch_btn" onclick="getLocationn(event)">fetch Location!!</button>
        </div>
        <div class="col-5 col-md-6">
          <button type="submit" class="btn form_btn">Save</button>
        </div>
      </div>
      
  </form>


 
  <p id="demo"></p>


  <script>
      var x = document.getElementById("demo");
      var lat = document.getElementById("id_lattitude");
      var lon = document.getElementById("id_longitude");
      
      function getLocationn(e) {
        e.preventDefault();
        if (navigator.geolocation) {
          navigator.geolocation.getCurrentPosition(showPosition);
        } else { 
          x.innerHTML = "Geolocation is not supported by this browser.";
        }
      }
      
      function showPosition(position) {
        lat.value=position.coords.latitude;
        lon.value=position.coords.longitude;
      }
      </script>

</div>


{% endblock %}